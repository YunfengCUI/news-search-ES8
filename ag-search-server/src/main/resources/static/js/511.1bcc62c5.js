"use strict";(self["webpackChunkag_search_view"]=self["webpackChunkag_search_view"]||[]).push([[511],{6511:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[t("el-row",[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加用户")]),t("el-dialog",{attrs:{title:"添加账号",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"ruleForm",attrs:{model:e.UserInfo,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"userName"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.UserInfo.userName,callback:function(t){e.$set(e.UserInfo,"userName",t)},expression:"UserInfo.userName"}})],1),t("el-form-item",{attrs:{label:"登录名","label-width":e.formLabelWidth,prop:"userLoginName"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.UserInfo.userLoginName,callback:function(t){e.$set(e.UserInfo,"userLoginName",t)},expression:"UserInfo.userLoginName"}})],1),t("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"userPassword"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.UserInfo.userPassword,callback:function(t){e.$set(e.UserInfo,"userPassword",t)},expression:"UserInfo.userPassword"}})],1),t("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,autocomplete:"off"}},[t("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.UserInfo.userSex,callback:function(t){e.$set(e.UserInfo,"userSex",t)},expression:"UserInfo.userSex"}},[t("el-option",{attrs:{label:"男",value:"1"}}),t("el-option",{attrs:{label:"女",value:"2"}})],1)],1),t("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.UserInfo.userPhone,callback:function(t){e.$set(e.UserInfo,"userPhone",t)},expression:"UserInfo.userPhone"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUser(),e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1)],1),t("el-row",[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":"",stripe:""},on:{"row-click":e.openRow}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",model:s,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{disabled:e.DisableEdit},model:{value:s.row.userName,callback:function(t){e.$set(s.row,"userName",t)},expression:"props.row.userName"}})],1),t("el-form-item",{attrs:{label:"登录名"}},[t("el-input",{attrs:{disabled:e.DisableEdit},model:{value:s.row.userLoginName,callback:function(t){e.$set(s.row,"userLoginName",t)},expression:"props.row.userLoginName"}})],1),t("el-form-item",{attrs:{label:"性别"}},[e.DisableEdit?t("el-input",{attrs:{disabled:e.DisableEdit},model:{value:s.row.userSex,callback:function(t){e.$set(s.row,"userSex",t)},expression:"props.row.userSex"}}):t("el-select",{attrs:{placeholder:"请选择性别"},model:{value:s.row.userSex,callback:function(t){e.$set(s.row,"userSex",t)},expression:"props.row.userSex"}},[t("el-option",{attrs:{label:"男",value:"1"}}),t("el-option",{attrs:{label:"女",value:"2"}})],1)],1),t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{attrs:{disabled:e.DisableEdit},model:{value:s.row.userPhone,callback:function(t){e.$set(s.row,"userPhone",t)},expression:"props.row.userPhone"}})],1),t("el-form-item",{attrs:{size:"large"}},[!0===e.DisableEdit?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.DisableEdit=!1}}},[e._v("编辑")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.ModifyUserInformation(s.row)}}},[e._v("提交")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteChoose(s.row)}}},[e._v("删除")])],1)],1)]}}])}),t("el-table-column",{attrs:{label:"用户名",prop:"userName"}}),t("el-table-column",{attrs:{label:"登录名",prop:"userLoginName"}}),t("el-table-column",{attrs:{label:"手机号",prop:"userPhone"}}),t("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(s){return[1===s.row.userSex?t("span",[t("i",{staticClass:"el-icon-male"})]):2===s.row.userSex?t("span",[t("i",{staticClass:"el-icon-female"})]):t("span",[e._v("???")])]}}])})],1)],1),t("el-row",[t("el-row",[t("div",{staticClass:"block"},[t("el-pagination",{attrs:{background:"","current-page":e.page.formNo,"page-size":e.page.formSize,layout:"total, prev, pager, next",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page,"formNo",t)},"update:current-page":function(t){return e.$set(e.page,"formNo",t)}}})],1)])],1)],1)},a=[];const{DelUser:o}=s(8185),{EditUserInfo:l}=s(8185),{AddUser:i}=s(8185),{queryPageUser:n}=s(8185);var u={name:"ManagementUser",data(){return{tableData:[],search:"",page:{total:0,formNo:1,formSize:10},DisableEdit:!0,dialogFormVisible:!1,UserInfo:{createUserId:sessionStorage.getItem("UserId"),updateUserId:sessionStorage.getItem("UserId"),updateUserName:sessionStorage.getItem("UserName"),createUserName:sessionStorage.getItem("UserName"),userName:"",userLoginName:"",userPassword:"",userSex:"",userPhone:""},formLabelWidth:"150px",rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],userLoginName:[{required:!0,message:"请输入登录名",trigger:"blur"}],userPassword:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{handleSizeChange(e){},handleCurrentChange(e){this.page.formNo=e,this.getUser(this.page)},getUser(e){n(e).then((e=>{this.tableData=e.data.result.records,this.page.total=e.data.result.total})).catch((e=>{this.$notify.error("出错了")}))},deleteChoose(e){let t=e.userId;this.$confirm("此操作将永久删除该对象, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{o(t).then((e=>{this.$message({type:"success",message:"删除成功!"}),this.page.total%this.page.formSize===1?this.page.formNo-=1:this.page.formNo,this.getUser(this.page)})).catch((e=>{this.$message({type:"error",message:"删除失败!"})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},openRow(e,t,s){this.DisableEdit=!0,this.$refs["multipleTable"].toggleRowExpansion(e)},ModifyUserInformation(e){e.updateUserName=sessionStorage.getItem("UserName"),e.updateUserId=sessionStorage.getItem("UserId"),l(e).then((e=>{this.$notify.success({title:"成功",message:"更新成功",position:"bottom-right"}),this.getUser(this.page)})).catch((e=>{this.$notify.error("出错了")}))},addUser(){i(this.UserInfo).then((e=>{this.$notify.success({title:"成功",message:"添加成功",position:"bottom-right"}),this.getUser(this.page)})).catch((e=>{this.$notify.error("出错了")}))}},created(){this.getUser(this.page)}},m=u,c=s(1001),p=(0,c.Z)(m,r,a,!1,null,"d100bd24",null),d=p.exports}}]);
//# sourceMappingURL=511.1bcc62c5.js.map