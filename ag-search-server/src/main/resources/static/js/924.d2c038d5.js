"use strict";(self["webpackChunkag_search_view"]=self["webpackChunkag_search_view"]||[]).push([[924],{5924:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main",staticStyle:{width:"100%"}},[e("el-row",[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"grid-content bg-purple"})]),e("el-col",{attrs:{span:14}},[e("div",{staticClass:"grid-content bg-purple-dark"},[e("h1",[t._v(t._s(t.news.title))])])]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{height:"64px"}},[e("div",{staticStyle:{"font-size":"20px",bottom:"0px",position:"relative","margin-top":"20%","max-height":"24px"}},[t._v(" 收藏"),e("i",{class:t.isCollect?"el-icon-star-on":"el-icon-star-off",staticStyle:{"font-size":"30px",color:"#f5e80a",position:"relative",top:"5px"},on:{click:function(e){return e.stopPropagation(),t.addComment()}}}),e("br"),t._v(" 近期访问 278 次 ")])])]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"})])],1),e("hr",{staticStyle:{width:"70%"}}),e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"})]),e("el-col",{attrs:{span:18}},[e("div",{staticClass:"grid-content bg-purple-light"},[e("div",{staticStyle:{margin:"10px 20px","min-height":"500px"}},[e("p",[t._v(t._s(t.news.content))])])])]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"})])],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"})]),e("el-col",{attrs:{span:18}},[e("hr"),e("div",{staticClass:"grid-content bg-purple-light"},[e("el-row",[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"grid-content bg-purple"},[e("div",{staticClass:"label-wang"},[e("i",{staticClass:"label-wang-in"})])])]),e("el-col",{attrs:{span:17}},[e("div",{staticClass:"grid-content bg-purple"},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"50","show-word-limit":""},model:{value:t.comment_text,callback:function(e){t.comment_text=e},expression:"comment_text"}})],1)]),e("el-col",{attrs:{span:1}},[e("div",{staticClass:"grid-content bg-purple"})]),e("el-col",{attrs:{span:2}},[e("div",{staticClass:"grid-content bg-purple"},[e("el-button",{staticStyle:{position:"relative",top:"10px"},attrs:{type:"primary"},on:{click:function(e){return t.add_comment()}}},[t._v("评论"),e("i",{staticClass:"el-icon-position el-icon--right"})])],1)]),e("el-col",{attrs:{span:2}},[e("div",{staticClass:"grid-content bg-purple"})])],1),e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"grid-content bg-purple-dark"},[e("table",[t._l(t.commentData,(function(s,i){return e("tr",{directives:[{name:"show",rawName:"v-show",value:0!==t.commentData.length,expression:"commentData.length!==0"}],key:i,staticStyle:{width:"100%",display:"inline-block"}},[e("td",[e("el-avatar",{attrs:{icon:"el-icon-user-solid"}})],1),e("td",[e("p",{staticClass:"item-content",domProps:{innerHTML:t._s(s.content)}}),e("div",[t.openReply==s.commentUuid?e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.reply_to_others,callback:function(e){t.reply_to_others=e},expression:"reply_to_others"}}):t._e()],1),e("span",[e("p",{staticClass:"item-time",staticStyle:{display:"inline-block"},domProps:{innerHTML:t._s(s.createdTime)}}),s.createdBy==t.userId||1==t.userId?e("el-button",{staticStyle:{display:"inline"},on:{click:function(e){return t.delComment(s.commentUuid)}}},[t._v(" 删除 ")]):t._e(),e("el-button",{staticStyle:{display:"inline"},on:{click:function(e){return t.replyComment(s)}}},[t._v(" 回复 ")])],1)])])})),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.commentData.length,expression:"commentData.length===0"}]},[e("div",{staticClass:"flex-column"},[e("pre",[t._v("                      还没有人评论哦！\n                    ")])])])],2)])])],1)],1)]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"})])],1),e("el-backtop",{attrs:{target:".main","visibility-height":400}})],1)},n=[];s(7658);const{checkCollectionStatus:a}=s(8185),{addCollection:o}=s(8185),{DelComment:l}=s(8185),{LastelyComment:r}=s(8185),{AddComment:c}=s(8185),{getByUuid:d}=s(8185);var p={name:"WatchNews",data(){return{news:{title:"",uuid:"",content:""},comment_text:"",reply_to_others:"",commentData:[],userId:sessionStorage.getItem("UserId"),openReply:"",isCollect:!1}},methods:{getNews(t){const e={uuid:t};d(e).then((t=>{this.news=t.data}))},add_comment(){const t={content:this.comment_text,createdBy:sessionStorage.getItem("UserId"),createdTime:new Date,objUuid:this.news.uuid,topLevel:0};c(t).then((t=>{this.comment_text="",this.lastelyComment(this.news.uuid)})).catch((t=>{this.$notify.error("出错了")}))},lastelyComment(t){const e={obj_uuid:t,formNo:1,formSize:10};r(e).then((t=>{this.commentData=t.data.result})).catch((t=>{this.$notify.error("出错了")}))},replyOthers(t){const e={obj_uuid:t,formNo:1,formSize:10};r(e).then((t=>{this.$set(this.commentData[0],"son",t.data.result)})).catch((t=>{this.$notify.error("出错了")}))},delComment(t){const e={commentUuid:t};l(e).then((t=>{alert("remove success"),this.lastelyComment(this.news.uuid)})).catch((t=>{this.$notify.error("出错了")}))},replyComment(t){if(this.openReply==t.commentUuid){const e={objUuid:t.commentUuid,content:this.reply_to_others,createdBy:sessionStorage.getItem("UserId"),createdTime:new Date};c(e).then((t=>{this.reply_to_others="",this.replyOthers(e.objUuid),alert("success reply")})).catch((t=>{this.$notify.error("出错了")}))}else this.openReply=t.commentUuid},addComment(){const t={arricleTitle:this.news.title,arrricleId:this.news.uuid,userUid:this.userId};null!==t.userUid?1!=this.isCollect?o(t).then((t=>{this.checkCollectionStatus(),this.$message({message:"收藏成功",type:"success"})})).catch((t=>{this.$notify.error("出错了")})):this.$message({message:"该文章已被收藏",type:"success"}):this.$router.push({name:"login"})},checkCollectionStatus(){const t={arrricleId:this.news.uuid,userUid:this.userId};a(t).then((t=>{this.isCollect=t.data})).catch((t=>{this.$notify.error("出错了")}))}},created(){this.news.title=this.$route.query.title,this.news.uuid=this.$route.query.uuid,this.getNews(this.$route.query.uuid),this.lastelyComment(this.news.uuid),this.checkCollectionStatus()},watch:{},computed:{}},u=p,m=s(1001),h=(0,m.Z)(u,i,n,!1,null,"a1d42d64",null),g=h.exports}}]);
//# sourceMappingURL=924.d2c038d5.js.map